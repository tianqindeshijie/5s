<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.chinamobile.iot.lightapp.mysql.dao.UserMapperExt">
  <resultMap id="BaseResultMap" type="com.chinamobile.iot.lightapp.mysql.dto.WorkCycleUserDTO">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <id column="user_user_id" jdbcType="INTEGER" property="userId" />
    <result column="nick_name" jdbcType="VARCHAR" property="nickName" />
    <result column="phone" jdbcType="VARCHAR" property="phone" />
    <result column="email" jdbcType="VARCHAR" property="email" />
    <result column="photo_id" jdbcType="INTEGER" property="photoId" />
    <result column="gender" jdbcType="INTEGER" property="gender" />
    <result column="company" jdbcType="VARCHAR" property="company" />
    <result column="post" jdbcType="VARCHAR" property="post" />
    <result column="department" jdbcType="VARCHAR" property="department" />
    <result column="join_time" jdbcType="TIMESTAMP" property="joinTime" />
    <result column="signature" jdbcType="VARCHAR" property="signature" />
    <result column="is_manager" jdbcType="INTEGER" property="isManager" />
  </resultMap>
  <select id="selectByWorkcycleId" resultMap="BaseResultMap">
    select user.user_id as user_user_id, nick_name, phone, email, photo_id, gender, company, post, department, join_time,signature,is_manager from `user` INNER JOIN user_workcycle ON `user`.user_id = user_workcycle.user_id where 1=1
    <if test="workcycleId !=null">
      and user_workcycle.work_cycle_id=#{workcycleId}
    </if>
  </select>
</mapper>